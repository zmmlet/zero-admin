import{_ as e}from"./index-9179353e.js";import{l as t,U as s,V as n,W as a,Z as r,_ as i,u as o,$ as u,a0 as l,a1 as c,a2 as m,F as d,v as _,r as h,b as p,j as g,G as f,K as v,a3 as E,a4 as L,N as b,a5 as y,a6 as I,a7 as w,a8 as x}from"./vue-d59f5a4d.js";/* empty css                */import{d as k,s as j}from"./pinia-e592ca27.js";import{l as C,s as R}from"./storage-b093f12e.js";import{I as T}from"./icons-87266709.js";import{_ as O,a as M,M as P,L as A,b as D,B as V,n as N,c as B,m as S,E as U,A as K,d as J,e as $,f as q,g as z,h as H,i as F,j as G}from"./antd-7726fdd8.js";import{_ as W}from"./_plugin-vue_export-helper-1b428a4d.js";/* empty css              */import{b as X}from"./axios-707b95a3.js";const Z=e=>{const t=[];return e.forEach((e=>{const{name:s,children:n}=e;if(!e.meta||!e.meta.hidden){n&&n.length&&(e.children=Z(n));let a="";e.children&&1===e.children.length&&(a=e.children[0].name),t.push({name:a||s,title:e.meta&&e.meta.title?e.meta.title:"",icon:e.meta&&e.meta.icon?e.meta.icon:"",meta:e.meta,children:a?[]:e.children})}})),t},Q=k("menuStore",{persist:{enabled:!0},state:()=>({title:"zero-admin",menus:[],openMenu:[],selectedMenu:"",isCollapse:!1,breadcrumbList:[""]}),getters:{getMenus:e=>e.menus},actions:{setSelectedMenu(e=""){this.selectedMenu=e,C.setCache("selectedMenu",e)},generateMenus(e){const t=Z(e);this.setMenus(t)},setMenus(e){this.menus=e},setOpenMenu(e=[]){this.openMenu=e,C.setCache("openMenu",e)},updateCollapse(){this.isCollapse=!this.isCollapse},SET_BREADCRUMB(e){C.setCache("breadcrumbList",e),this.breadcrumbList=e},clearMenus(){this.menus=[]}}}),Y=t({__name:"SubMenu",props:{menuInfo:{type:Object,default:()=>({})}},setup:e=>(t,h)=>{const p=s("router-link"),g=O,f=s("SubMenu",!0),v=M;return n(),a(v,{key:e.menuInfo.name},{title:r((()=>[i("span",null,[e.menuInfo.meta&&e.menuInfo.meta.icon?(n(),a(o(T),{key:0,icon:e.menuInfo.meta.icon},null,8,["icon"])):u("",!0),i("span",null,l(e.menuInfo.meta&&e.menuInfo.meta.title),1)])])),default:r((()=>[e.menuInfo.children&&e.menuInfo.children.length?(n(!0),c(d,{key:0},m(e.menuInfo.children,(e=>(n(),c(d,null,[!e.children||e.children&&e.children.length&&1===e.children.length?(n(),a(g,{key:e.name},{default:r((()=>[_(p,{to:{name:e.children&&e.children.length&&1===e.children.length?e.children[0].name:e.name}},{default:r((()=>[i("span",null,l(e.meta&&e.meta.title),1)])),_:2},1032,["to"])])),_:2},1024)):(n(),a(f,{"menu-info":e,key:e.path},null,8,["menu-info"]))],64)))),256)):u("",!0)])),_:1})}}),ee=[{name:"dashboard",title:"首页"}],te=ee.map((e=>e.name)),se=k("breadcrumb",{state:()=>({breadcrumbList:te}),getters:{getBreadcrumb:e=>e.breadcrumbList,filterBreadcrumb(){return(e=[],t=[])=>{const s=this.getBreadcrumb;if(e&&e.length&&s&&s.length){const n=s.shift(),a=e.find((e=>e.name===n));if(t.push({name:null==a?void 0:a.name,title:null==a?void 0:a.title}),null==a?void 0:a.children)return this.filterBreadcrumb(a.children,t)}return t&&t.length?t:ee}}},actions:{setBreadcrumb(e){this.breadcrumbList=e},generateBreadcrumb(){const{menus:e}=Q();return this.filterBreadcrumb(e,[])}}}),ne=t({__name:"menu",setup(e){const{setBreadcrumb:t}=se(),{menus:g}=j(Q()),{setSelectedMenu:f,setOpenMenu:v,SET_BREADCRUMB:E}=Q();let L=h(C.getCache("selectedMenu")?[C.getCache("selectedMenu")]:[]),b=h(C.getCache("openMenu")?C.getCache("openMenu"):[]);const y=({key:e,keyPath:s})=>{f(e),v(b.value),E(s),t(s)};return(e,t)=>{const h=s("router-link"),f=O,v=P;return n(),a(v,{mode:"inline",theme:"dark",onClick:y,openKeys:o(b),"onUpdate:openKeys":t[0]||(t[0]=e=>p(b)?b.value=e:b=e),selectedKeys:o(L),"onUpdate:selectedKeys":t[1]||(t[1]=e=>p(L)?L.value=e:L=e)},{default:r((()=>[(n(!0),c(d,null,m(o(g),(e=>(n(),c(d,null,[!e.children||e.children&&e.children.length&&1===e.children.length?(n(),a(f,{key:e.name},{default:r((()=>[_(h,{to:{name:e.children&&e.children.length&&1===e.children.length?e.children[0].name:e.name}},{default:r((()=>[e.meta&&e.meta.icon?(n(),a(o(T),{key:0,icon:e.meta.icon},null,8,["icon"])):u("",!0),i("span",null,l(e.meta&&e.meta.title),1)])),_:2},1032,["to"])])),_:2},1024)):(n(),a(Y,{"menu-info":e,key:e.title},null,8,["menu-info"]))],64)))),256))])),_:1},8,["openKeys","selectedKeys"])}}}),ae="/static/svg/logo-ffc25827.svg",re={class:"m-logo"},ie=(e=>(E("data-v-cc3a55ce"),e=e(),L(),e))((()=>i("img",{src:ae,class:"icon"},null,-1))),oe=W(t({__name:"logo",setup(e){const t=Q(),s=g((()=>t.title)),a=g((()=>t.isCollapse));return(e,t)=>(n(),c("div",re,[ie,f(i("div",{class:"title"},l(o(s)),513),[[v,!o(a)]])]))}}),[["__scopeId","data-v-cc3a55ce"]]),ue=t({__name:"index",setup(e){const t=Q(),s=g((()=>t.isCollapse));return(e,t)=>{const i=A;return n(),a(i,{collapsed:o(s),"onUpdate:collapsed":t[0]||(t[0]=e=>p(s)?s.value=e:null)},{default:r((()=>[_(oe),_(ne)])),_:1},8,["collapsed"])}}}),le=t({__name:"breadcrumb",setup(e){const{generateBreadcrumb:t}=se(),i=g((()=>t()));return(e,t)=>{const u=s("RouterLink"),h=D,p=V;return n(),a(p,{style:{margin:"16px 0"}},{default:r((()=>[(n(!0),c(d,null,m(o(i),(e=>(n(),a(h,{key:e.name},{default:r((()=>[_(u,{to:{name:e.name}},{default:r((()=>[b(l(e.title),1)])),_:2},1032,["to"])])),_:2},1024)))),128))])),_:1})}}}),ce="/sys/login",me="/sys/permission",de=k("userStore",{persist:{enabled:!0},state:()=>({token:"",userName:"",userInfo:{},routerList:[]}),actions:{setCacheMe(){return new Promise(((e,t)=>{const s=C.getCache("menus");this.routerList=s,e(!0)}))},getRouter({userName:e,password:t}){return new Promise(((s,n)=>{ge(me,{userName:e,password:t}).then((e=>{if(e.success){const t=e.data;this.routerList=t.permissions,C.setCache("menus",t.permissions),s(e)}else n(e.message)})).catch((e=>{n(e)}))}))},login({userName:e,password:t}){return new Promise(((s,n)=>{var a,r;(a=ce,r={userName:e,password:t},_e({url:a,method:"post",data:r})).then((e=>{if(e.success){const t=e.data;this.token="testToken",this.userInfo=t.userInfo,this.userName=t.userInfo.userName,C.setCache("token",t.token),C.setCache("userName",t.userInfo.userName),C.setCache("userInfo",t.userInfo),s(e)}else n(e.message)})).catch((e=>{n(e)}))}))},logout(){return new Promise((e=>{JSON.parse(JSON.stringify(this.routerList)).forEach((e=>{Oe.removeRoute(e.name)})),this.clearUser(),this.clearToken(),this.clearRouterList(),C.clearCache(),e("注销 success， 清空路由，用户信息")}))},clearRouterList(){this.routerList=[]},clearToken(){this.token=""},clearUser(){this.userName="",this.userInfo={}}}}),_e=X.create({baseURL:"/api",timeout:12e4,withCredentials:!0}),he=e=>{if(e.message.includes("timeout")&&N.error({message:"系统提示",description:"请求超时",duration:4}),e.response){const t=e.response.data,s=C.getCache("token");403==e.response.status&&N.error({message:"系统提示",description:"请求资源失败",duration:4}),401!==e.response.status||t.result&&t.result.isLogin||(N.error({message:"系统提示",description:"没有访问权限",duration:4}),s&&fe())}return Promise.reject(e)};function pe(e,t,s){return _e({url:e,method:s,data:t})}function ge(e,t){return _e({url:e,method:"get",params:t})}function fe(){B.confirm({title:"退出登录?",icon:_(U),okText:"确认",cancelText:"取消",onOk(){S.success("退出成功"),Oe.push("/login"),C.clearCache(),R.clear(),setTimeout((()=>{window.location.reload()}),100)},onCancel(){S.info("取消退出登录")}})}_e.interceptors.request.use((e=>{const t=de().token||"";return"get"==e.method&&(e.params={_t:(new Date).getTime(),...e.params}),{...e,headers:{"X-Access-Token":t}}}),he),_e.interceptors.response.use((e=>{e.config;const t=Number(e.data.code);if(200==t||0==t)return e.data;[402,403,500].includes(e.data.code)&&(N.error({message:"系统提示",description:"没有权限",duration:4}),setTimeout((()=>{window.location.reload()}),500))}),he);const ve={class:"logout"},Ee=(e=>(E("data-v-bd6478fa"),e=e(),L(),e))((()=>i("div",{class:"setting"},"个人设置",-1))),Le={class:"user-name"},be=W(t({__name:"logout",setup(e){let{userName:t}=j(de());const s=g((()=>t)),a=()=>{fe()};return(e,t)=>{const u=K,m=J;return n(),c("div",ve,[_(m,{placement:"bottom"},{content:r((()=>[Ee,i("div",{class:"setting",onClick:a},"退出登录")])),default:r((()=>[_(u,{style:{"background-color":"#87d068"}},{icon:r((()=>[_(o(T),{icon:"UserOutlined"})])),_:1}),i("span",Le,l(o(s).value),1),_(o(T),{icon:"CaretDownOutlined"})])),_:1})])}}}),[["__scopeId","data-v-bd6478fa"]]),ye=W(t({__name:"index",setup(e){const t=Q(),s=g((()=>t.isCollapse)),i=()=>{t.updateCollapse()};return(e,t)=>{const u=z;return n(),a(u,{class:"c-header"},{default:r((()=>[o(s)?(n(),a(o($),{key:0,class:"c-header-trigger",onClick:i})):(n(),a(o(q),{key:1,class:"c-header-trigger",onClick:i})),_(le,{class:"c-header-breadcrumb"}),_(be,{class:"c-header-logout"})])),_:1})}}}),[["__scopeId","data-v-ac102605"]]),Ie=t({data:()=>({})}),we={class:"c-main-content"};const xe=W(Ie,[["render",function(e,t,o,u,l,c){const m=s("router-view"),d=H;return n(),a(d,{class:"c-main"},{default:r((()=>[i("div",we,[_(m,null,{default:r((({Component:e})=>[(n(),a(y,null,[(n(),a(I(e)))],1024))])),_:1})])])),_:1})}],["__scopeId","data-v-9766f7d1"]]);const ke=W(t({}),[["render",function(e,t,s,i,o,u){const l=F;return n(),a(l,{style:{"text-align":"center"}},{default:r((()=>[b(" zero-admin-system ")])),_:1})}]]),je=(t,s,n)=>{if(n.routerList&&n.routerList.length>0){const a=JSON.parse(JSON.stringify(n.routerList));Ce(a,Object.assign({"./views/AboutView.vue":()=>e((()=>import("./AboutView-b36e936e.js")),["static/js/AboutView-b36e936e.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js","static/css/AboutView-649e276b.css"]),"./views/HomeView.vue":()=>e((()=>import("./HomeView-bb2792dd.js")),["static/js/HomeView-bb2792dd.js","static/js/icons-87266709.js","static/js/antd-7726fdd8.js","static/js/vue-d59f5a4d.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/HomeView-1ab4af6e.css"]),"./views/Login/index.vue":()=>e((()=>import("./index-d67948b1.js")),["static/js/index-d67948b1.js","static/js/index-9179353e.js","static/css/index-d003ba79.css","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/pinia-e592ca27.js","static/js/storage-b093f12e.js","static/js/icons-87266709.js","static/css/index-ec513294.css","static/css/default-5389cec4.css","static/css/index-83265118.css","static/css/index-109c71da.css","static/css/index-1f069cba.css","static/css/index-1ae4780a.css"]),"./views/ability/autograph/index.vue":()=>e((()=>import("./index-c9467bc0.js")),["static/js/index-c9467bc0.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/css/index-0f9d29c4.css","static/css/default-5389cec4.css","static/css/index-1ae4780a.css","static/css/index-109c71da.css","static/css/index-63d5eeed.css"]),"./views/ability/fileDownload/index.vue":()=>e((()=>import("./index-bb05d776.js")),["static/js/index-bb05d776.js","static/js/index-86c7435b.js","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/css/default-5389cec4.css","static/css/index-109c71da.css","static/css/index-63d5eeed.css"]),"./views/ability/print/index.vue":()=>e((()=>import("./index-d7e97341.js")),["static/js/index-d7e97341.js","static/js/axios-707b95a3.js","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/index-1868c3ff.css","static/css/default-5389cec4.css","static/css/index-109c71da.css","static/css/index-63d5eeed.css"]),"./views/ability/waterMark/index.vue":()=>e((()=>import("./index-a4d6242e.js")),["static/js/index-a4d6242e.js","static/js/antd-7726fdd8.js","static/js/vue-d59f5a4d.js","static/js/axios-707b95a3.js","static/css/index-e7156082.css","static/css/default-5389cec4.css"]),"./views/analysis/index.vue":()=>e((()=>import("./index-7ae9bc61.js")),["static/js/index-7ae9bc61.js","static/js/echarts-d50100d5.js","static/js/storage-b093f12e.js","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/index-858115c8.css","static/css/default-5389cec4.css","static/css/index-109c71da.css","static/css/index-63d5eeed.css"]),"./views/charts/map.vue":()=>e((()=>import("./map-6c0a568a.js")),["static/js/map-6c0a568a.js","static/js/echarts-d50100d5.js","static/js/vue-d59f5a4d.js"]),"./views/charts/pie.vue":()=>e((()=>import("./pie-d00ba29d.js")),["static/js/pie-d00ba29d.js","static/js/echarts-d50100d5.js","static/js/vue-d59f5a4d.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/pie-1dba4846.css"]),"./views/charts/smartCity.vue":()=>e((()=>import("./smartCity-8fd3814c.js")),["static/js/smartCity-8fd3814c.js","static/js/axios-707b95a3.js","static/js/vue-d59f5a4d.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/smartCity-cc659028.css"]),"./views/components/table/index.vue":()=>e((()=>import("./index-7f0be06c.js")),["static/js/index-7f0be06c.js","static/js/index-9179353e.js","static/css/index-d003ba79.css","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/css/index-5c1c5fc9.css","static/css/default-5389cec4.css","static/css/index-109c71da.css","static/css/index-77705ff4.css"]),"./views/components/tree/index.vue":()=>e((()=>import("./index-9fa15683.js")),["static/js/index-9fa15683.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js"]),"./views/system/account/index.vue":()=>e((()=>import("./index-af771d42.js")),["static/js/index-af771d42.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js"]),"./views/system/changePassword/index.vue":()=>e((()=>import("./index-ccac4a34.js")),["static/js/index-ccac4a34.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js"]),"./views/system/dept/index.vue":()=>e((()=>import("./index-859399ef.js")),["static/js/index-859399ef.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js"]),"./views/system/menu/index.vue":()=>e((()=>import("./index-105d9647.js")),["static/js/index-105d9647.js","static/js/index-9179353e.js","static/css/index-d003ba79.css","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/index-321ff388.css","static/css/default-5389cec4.css","static/css/index-109c71da.css","static/css/index-77705ff4.css","static/css/index-1f069cba.css","static/css/index-83265118.css"]),"./views/system/role/index.vue":()=>e((()=>import("./index-5a6814c5.js")),["static/js/index-5a6814c5.js","static/js/index-9179353e.js","static/css/index-d003ba79.css","static/js/vue-d59f5a4d.js","static/js/icons-87266709.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/index-9e3f5b23.css","static/css/default-5389cec4.css","static/css/index-109c71da.css","static/css/index-77705ff4.css","static/css/index-1f069cba.css","static/css/index-83265118.css"]),"./views/system/role/modules/addEdit.vue":()=>e((()=>import("./addEdit-6ce7591b.js")),["static/js/addEdit-6ce7591b.js","static/js/index-9179353e.js","static/css/index-d003ba79.css","static/js/index-86c7435b.js","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/pinia-e592ca27.js","static/js/storage-b093f12e.js","static/js/icons-87266709.js","static/css/addEdit-46e2eb55.css","static/css/default-5389cec4.css","static/css/index-1f069cba.css","static/css/index-83265118.css","static/css/index-109c71da.css"]),"./views/vueSyntax/life.cycle.vue":()=>e((()=>import("./life.cycle-d7a5ac41.js")),["static/js/life.cycle-d7a5ac41.js","static/js/vue-d59f5a4d.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/life.cycle-d3f7b923.css"])})),a.forEach((e=>{s.addRoute("Layout",e)})),t.generateMenus(a)}s.addRoute({path:"/:pathMatch(.*)*",name:"404",component:()=>e((()=>import("./index-302b7a95.js")),["static/js/index-302b7a95.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js","static/css/index-177037e3.css"]),meta:{title:"404",layout:!1}})},Ce=(e,t)=>e.map((e=>{const s=e;return s.component&&(s.component=t[`./views/${s.component}.vue`]),s.children&&s.children.length>0&&Ce(s.children,t),s})),Re=[{name:"Login",path:"/login",component:()=>e((()=>import("./index-d67948b1.js")),["static/js/index-d67948b1.js","static/js/index-9179353e.js","static/css/index-d003ba79.css","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/pinia-e592ca27.js","static/js/storage-b093f12e.js","static/js/icons-87266709.js","static/css/index-ec513294.css","static/css/default-5389cec4.css","static/css/index-83265118.css","static/css/index-109c71da.css","static/css/index-1f069cba.css","static/css/index-1ae4780a.css"]),meta:{title:"登录",inMenu:!1}},{path:"/city",component:()=>e((()=>import("./smartCity-8fd3814c.js")),["static/js/smartCity-8fd3814c.js","static/js/axios-707b95a3.js","static/js/vue-d59f5a4d.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/smartCity-cc659028.css"]),name:"city",meta:{title:"maptalks",inMenu:!1}},{path:"/",name:"Layout",component:t({__name:"index",setup:e=>(e,t)=>{const s=G;return n(),a(s,{style:{"min-height":"100vh"}},{default:r((()=>[_(ue),_(s,null,{default:r((()=>[_(ye),_(xe),_(ke)])),_:1})])),_:1})}}),meta:{title:"Layout",inMenu:!1},children:[...[{path:"/dashboard",name:"dashboard",component:()=>e((()=>import("./index-7ae9bc61.js")),["static/js/index-7ae9bc61.js","static/js/echarts-d50100d5.js","static/js/storage-b093f12e.js","static/js/vue-d59f5a4d.js","static/js/antd-7726fdd8.js","static/js/axios-707b95a3.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/css/index-858115c8.css","static/css/default-5389cec4.css","static/css/index-109c71da.css","static/css/index-63d5eeed.css"]),meta:{title:"Dashboard",breadcrumb:["分析页面"],keep:!1,icon:"LineChartOutlined",role:["admin"],hidden:!1}}]]},{name:"404",path:"/:pathMatch(.*)",component:()=>e((()=>import("./index-302b7a95.js")),["static/js/index-302b7a95.js","static/js/_plugin-vue_export-helper-1b428a4d.js","static/js/vue-d59f5a4d.js","static/css/index-177037e3.css"]),meta:{title:"找不到页面"}}],Te=Re.find((e=>"Layout"===e.name));null==Te||Te.children;const Oe=w({history:x("/"),routes:Re});let Me=!0,Pe=!0;Oe.beforeEach((async(e,t,s)=>{const n=Q(),a=de(),r=C.getCache("token");"Login"===e.name||r?("Login"===e.name&&(setTimeout((()=>{var e,t,s;t=Oe,s=a,(e=n).menus&&e.menus.length>0&&(e.menus.forEach((e=>{t.removeRoute(e.name)})),e.clearMenus(),s.clearRouterList())}),2e3),a.clearToken(),a.clearUser()),"Login"===t.name&&Me&&(je(n,Oe,a),s({...e,replace:!0}),Me=!1),!t.name&&Pe?(a.routerList&&a.routerList.length>0?je(n,Oe,a):a.setCacheMe().then((()=>{je(n,Oe,a)})),s({path:`${e.path}`}),Pe=!1):s()):s({name:"Login"})})),Oe.onError((e=>{e.message.match(/Loading chunk (\d)+ failed/g)&&location.reload()}));export{ae as _,ge as g,pe as h,Oe as r,de as u};
