System.register(["./default-legacy-726767b1.js","./index-legacy-273343b3.js","./index-legacy-5749716c.js","./index-legacy-5209814a.js","./_plugin-vue_export-helper-legacy-762b7923.js","./vue-legacy-8dfae8d8.js","./antd-legacy-c0da7948.js","./axios-legacy-c0dde2c8.js"],(function(t,e){"use strict";var a,s,i,n,o,r,l,h,d,c,u,v,f,g,p,m,b,y=document.createElement("style");return y.textContent='@charset "UTF-8";canvas[data-v-acb91b8e]{max-width:100%;display:block}/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html[data-v-0fa5412e]{line-height:1.15;-webkit-text-size-adjust:100%}body[data-v-0fa5412e]{margin:0!important}main[data-v-0fa5412e]{display:block}h1[data-v-0fa5412e]{font-size:2em;margin:.67em 0}hr[data-v-0fa5412e]{box-sizing:content-box;height:0;overflow:visible}pre[data-v-0fa5412e]{font-family:monospace,monospace;font-size:1em}a[data-v-0fa5412e]{background-color:transparent}abbr[title][data-v-0fa5412e]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b[data-v-0fa5412e],strong[data-v-0fa5412e]{font-weight:bolder}code[data-v-0fa5412e],kbd[data-v-0fa5412e],samp[data-v-0fa5412e]{font-family:monospace,monospace;font-size:1em}small[data-v-0fa5412e]{font-size:80%}sub[data-v-0fa5412e],sup[data-v-0fa5412e]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub[data-v-0fa5412e]{bottom:-.25em}sup[data-v-0fa5412e]{top:-.5em}img[data-v-0fa5412e]{border-style:none}button[data-v-0fa5412e],input[data-v-0fa5412e],optgroup[data-v-0fa5412e],select[data-v-0fa5412e],textarea[data-v-0fa5412e]{font-family:inherit;font-size:100%;margin:0}button[data-v-0fa5412e],input[data-v-0fa5412e]{overflow:visible}button[data-v-0fa5412e],select[data-v-0fa5412e]{text-transform:none}button[data-v-0fa5412e],[type=button][data-v-0fa5412e],[type=reset][data-v-0fa5412e],[type=submit][data-v-0fa5412e]{-webkit-appearance:button}button[data-v-0fa5412e]::-moz-focus-inner,[type=button][data-v-0fa5412e]::-moz-focus-inner,[type=reset][data-v-0fa5412e]::-moz-focus-inner,[type=submit][data-v-0fa5412e]::-moz-focus-inner{border-style:none;padding:0}button[data-v-0fa5412e]:-moz-focusring,[type=button][data-v-0fa5412e]:-moz-focusring,[type=reset][data-v-0fa5412e]:-moz-focusring,[type=submit][data-v-0fa5412e]:-moz-focusring{outline:.0625rem dotted ButtonText}fieldset[data-v-0fa5412e]{padding:.35em .75em .625em}legend[data-v-0fa5412e]{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress[data-v-0fa5412e]{vertical-align:baseline}textarea[data-v-0fa5412e]{overflow:auto}[type=checkbox][data-v-0fa5412e],[type=radio][data-v-0fa5412e]{box-sizing:border-box;padding:0}[type=number][data-v-0fa5412e]::-webkit-inner-spin-button,[type=number][data-v-0fa5412e]::-webkit-outer-spin-button{height:auto}[type=search][data-v-0fa5412e]{-webkit-appearance:textfield;outline-offset:-.125rem}[type=search][data-v-0fa5412e]::-webkit-search-decoration{-webkit-appearance:none}[data-v-0fa5412e]::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details[data-v-0fa5412e]{display:block}summary[data-v-0fa5412e]{display:list-item}template[data-v-0fa5412e]{display:none}[hidden][data-v-0fa5412e]{display:none}.layout-content[data-v-0fa5412e]{padding:1.5rem}.not-padding-bottom[data-v-0fa5412e]{padding-bottom:0}.ant-table-body[data-v-0fa5412e]::-webkit-scrollbar{width:.4375rem}.ant-table-body[data-v-0fa5412e]::-webkit-scrollbar-track{-webkit-box-shadow:inset0.375remrgba(0,0,0,.3);border-radius:.3125rem}.ant-table-body[data-v-0fa5412e]::-webkit-scrollbar-thumb{border-radius:.3125rem;background:rgba(0,0,0,.1);-webkit-box-shadow:inset0.375remrgba(0,0,0,.5)}.ant-table-body[data-v-0fa5412e]::-webkit-scrollbar-thumb:window-inactive{background:rgba(255,0,0,.4)}.total[data-v-0fa5412e]{margin-top:1rem}.total button[data-v-0fa5412e]:not(:first-child){margin-left:.625rem}.autograph[data-v-0fa5412e]{margin:1rem 0;border:.125rem solid #efefef}\n',document.head.appendChild(y),{setters:[null,null,null,null,t=>{a=t._},t=>{s=t.V,i=t.a1,n=t.l,o=t.a,r=t.t,l=t.r,h=t.v,d=t._,c=t.Z,u=t.N,v=t.u,f=t.b,g=t.$},t=>{p=t.k,m=t.l,b=t.C},null],execute:function(){const e={props:{width:{type:Number,default:800},height:{type:Number,default:300},lineWidth:{type:Number,default:4},lineColor:{type:String,default:"#000000"},bgColor:{type:String,default:""},isCrop:{type:Boolean,default:!1},isClearBgColor:{type:Boolean,default:!0},format:{type:String,default:"image/png"},quality:{type:Number,default:1}},data:()=>({hasDrew:!1,resultImg:"",points:[],canvasTxt:null,startX:0,startY:0,isDrawing:!1,sratio:1}),computed:{ratio(){return this.height/this.width},stageInfo(){return this.$refs.canvas.getBoundingClientRect()},myBg(){return this.bgColor?this.bgColor:"rgba(255, 255, 255, 0)"}},watch:{myBg:function(t){this.$refs.canvas.style.background=t}},beforeMount(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy(){window.removeEventListener("resize",this.$_resizeHandler)},mounted(){const t=this.$refs.canvas;t.height=this.height,t.width=this.width,t.style.background=this.myBg,this.$_resizeHandler(),// 在画板以外松开鼠标后冻结画笔
document.onmouseup=()=>{this.isDrawing=!1}},methods:{$_resizeHandler(){const t=this.$refs.canvas;t.style.width=this.width+"px";const e=parseFloat(window.getComputedStyle(t).width);t.style.height=this.ratio*e+"px",this.canvasTxt=t.getContext("2d"),this.canvasTxt.scale(1*this.sratio,1*this.sratio),this.sratio=e/this.width,this.canvasTxt.scale(1/this.sratio,1/this.sratio)},// pc
mouseDown(t){(t=t||event).preventDefault(),this.isDrawing=!0,this.hasDrew=!0;let e={x:t.offsetX,y:t.offsetY};this.drawStart(e)},mouseMove(t){if((t=t||event).preventDefault(),this.isDrawing){let e={x:t.offsetX,y:t.offsetY};this.drawMove(e)}},mouseUp(t){(t=t||event).preventDefault();let e={x:t.offsetX,y:t.offsetY};this.drawEnd(e),this.isDrawing=!1},// mobile
touchStart(t){if((t=t||event).preventDefault(),this.hasDrew=!0,1===t.touches.length){let e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawStart(e)}},touchMove(t){if((t=t||event).preventDefault(),1===t.touches.length){let e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawMove(e)}},touchEnd(t){if((t=t||event).preventDefault(),1===t.touches.length){let e={x:t.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:t.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawEnd(e)}},// 绘制
drawStart(t){this.startX=t.x,this.startY=t.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t)},drawMove(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.strokeStyle=this.lineColor,this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=t.y,this.startX=t.x,this.points.push(t)},drawEnd(t){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(t.x,t.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(t),this.points.push({x:-1,y:-1})},// 操作
generate(t){let e=t&&t.format?t.format:this.format,a=t&&t.quality?t.quality:this.quality;return new Promise(((t,s)=>{if(this.hasDrew){var i=this.canvasTxt.getImageData(0,0,this.$refs.canvas.width,this.$refs.canvas.height);this.canvasTxt.globalCompositeOperation="destination-over",this.canvasTxt.fillStyle=this.myBg,this.canvasTxt.fillRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.resultImg=this.$refs.canvas.toDataURL(e,a);var n=this.resultImg;if(this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.canvasTxt.putImageData(i,0,0),this.canvasTxt.globalCompositeOperation="source-over",this.isCrop){const t=this.getCropArea(i.data);var o=document.createElement("canvas");const s=o.getContext("2d");o.width=t[2]-t[0],o.height=t[3]-t[1];const r=this.canvasTxt.getImageData(...t);s.globalCompositeOperation="destination-over",s.putImageData(r,0,0),s.fillStyle=this.myBg,s.fillRect(0,0,o.width,o.height),n=o.toDataURL(e,a),o=null}t(n)}else s("Warning: Not Signned!")}))},reset(){this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.isClearBgColor&&(this.$emit("update:bgColor",""),this.$refs.canvas.style.background="rgba(255, 255, 255, 0)"),this.points=[],this.hasDrew=!1,this.resultImg=""},getCropArea(t){for(var e=this.$refs.canvas.width,a=0,s=this.$refs.canvas.height,i=0,n=0;n<this.$refs.canvas.width;n++)for(var o=0;o<this.$refs.canvas.height;o++){var r=4*(n+this.$refs.canvas.width*o);(t[r]>0||t[r+1]>0||t[r+2]||t[r+3]>0)&&(i=Math.max(o,i),a=Math.max(n,a),s=Math.min(o,s),e=Math.min(n,e))}return[++e,++s,++a,++i]}}},y=a(e,[["render",function(t,e,a,n,o,r){return s(),i("canvas",{ref:"canvas",onMousedown:e[0]||(e[0]=(...t)=>r.mouseDown&&r.mouseDown(...t)),onMousemove:e[1]||(e[1]=(...t)=>r.mouseMove&&r.mouseMove(...t)),onMouseup:e[2]||(e[2]=(...t)=>r.mouseUp&&r.mouseUp(...t)),onTouchstart:e[3]||(e[3]=(...t)=>r.touchStart&&r.touchStart(...t)),onTouchmove:e[4]||(e[4]=(...t)=>r.touchMove&&r.touchMove(...t)),onTouchend:e[5]||(e[5]=(...t)=>r.touchEnd&&r.touchEnd(...t))},null,544)}],["__scopeId","data-v-acb91b8e"]]);y.install=function(t){this.installed||(this.installed=!0,t.component("vueEsign",y))};// if (typeof window !== 'undefined' && window.Vue) {
//   window.Vue.use(vueEsign)
// }
const x={class:"layout-content"},w={class:"total"},T={class:"autograph"},C={class:"esigh-result"},k=["src"];t("default",a(n({__name:"index",setup(t){const e=o({lineWidth:2,lineColor:"#000000",bgColor:"#efefef",resultImg:"",isCorp:!1}),{lineWidth:a,lineColor:n,bgColor:$}=r(e),z=l(null),D=()=>{z.value.reset(),e.resultImg=""},M=()=>{z.value.generate().then((t=>{e.resultImg=t})).catch((t=>{alert(t)}))},B=t=>{e.isCorp=t.target.checked};return(t,o)=>{const r=p,l=m,I=b;return s(),i("div",x,[h(r,{message:"插件 pnpm add vue-esign --save"}),d("div",w,[h(l,{onClick:D},{default:c((()=>[u("清空画板")])),_:1}),h(l,{onClick:M},{default:c((()=>[u("生成图片")])),_:1}),u(" 是否裁剪："),h(I,{onChange:B,checked:e.isCorp,"onUpdate:checked":o[0]||(o[0]=t=>e.isCorp=t)},null,8,["checked"])]),d("div",T,[h(v(y),{ref_key:"esign",ref:z,width:800,height:300,"is-crop":e.isCorp,"line-width":v(a),lineColor:v(n),bgColor:v($),"onUpdate:bgColor":o[1]||(o[1]=t=>f($)?$.value=t:null)},null,8,["is-crop","line-width","lineColor","bgColor"])]),d("div",C,[e.resultImg?(s(),i("img",{key:0,src:e.resultImg,alt:""},null,8,k)):g("",!0)])])}}}),[["__scopeId","data-v-0fa5412e"]]))}}}));
